<div class="pre <%= @preclass %>">
<table class="language <%= @language %> syntaxhl">
<tbody>
<% line_num = @line_num || 1 %>
<% Redmine::SyntaxHighlighting.highlight_by_language(@code, @language).each_line do |line| %>
  <tr id="L<%= line_num %>">
    <th class="line-num">
      <a href="#L<%= line_num %>"><%= line_num %></a>
    </th>
    <td class="line-code">
      <pre><%= line.html_safe %></pre>
    </td>
  </tr>
  <% line_num += 1 %>
<% end %>
</tbody>
</table>
</div>
